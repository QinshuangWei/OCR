<!DOCTYPE html>  
  
<html>  
    <head>  
        <title>Canvas from scratch</title>  
        <meta charset="utf-8">  
        <script src="jquery-latest.min.js"></script>
        <style>
            #Canvas0,#Canvas1,#Canvas2{
              border:2px solid;
              //position:fixed;
            }
            #Canvas1{
              z-index:+1;
            }
        </style> 
    </head>
  
    <body>
        <canvas id="Canvas0" width="100" height="100"></canvas> 
        <canvas id="Canvas1" width="100" height="100"></canvas>
        <canvas id="Canvas2" width="100" height="100"></canvas>
        <div id='foo'></div> 
        <script>
            var canvas0 = document.getElementById("Canvas0");  
            var ctx0 = canvas0.getContext("2d");

            var canvas1 = document.getElementById("Canvas1");  
            var ctx1 = canvas1.getContext("2d");

            var canvas2 = document.getElementById("Canvas2");  
            var ctx2 = canvas2.getContext("2d");

            var image = new Image();  
            image.src = "a.jpg";
            

            function create_test_cases(context){
                context.font = '120px Arial';
                //ctx2.fillText('H', 100, 100);
                context.fillText("S", 10, 90);
            }

            function analyze(context){
                
            }

            $(image).load(function(){
                analyze(ctx2);

                ctx0.drawImage(image, 0, 0,100,100);
                var x,y,p,matrix=[];

                for(i=0;i<10;i++){
                    matrix[i] = [ 0,0,0,0,0,0,0,0,0,0 ];
                }

                for(x=0;x<100;x=x+10){
                    for(y=0;y<100;y=y+10){
                        p = ctx0.getImageData(x, y, 1, 1).data;
                        try {
                            if (p[0] < 10){ matrix[ parseInt(x/10) ][ parseInt(y/10) ] = 1; }  
                        }   
                        catch(e){
                            console.log(e)
                        }    
                        //document.write(matrix);            
                        //console.log(p[0] + " " + p[1] + ' '+' '+p[2]+' ' +p[3] +';\n');        
                    }
                }

                //document.getElementById('foo').innerHTML = matrix;
                for(i=0;i<10;i++){
                    for(j=0;j<10;j++){
                        if(matrix[i][j] == 1){
                            ctx1.fillStyle="#FF0000";
                            ctx1.fillRect(i*10,j*10,10,10);
                            ctx1.stroke();
                        }
                    }
                    //document.write(matrix[i][0]);
                    //document.getElementById('foo').innerHTML += matrix[i] + ' . ';
                }

            });
            
            //ctx2.fillRect(0,0,100,100);
            
            // Drawing a mesh on ctx1
            for (x =0;x<200;x=x+10){
                ctx1.strokeStyle="rgb(0,0,0)";
                ctx1.fillStyle = "rgb(200,10,0)";
                //ctx1.fillRect (0, 0, 525, 250);
                ctx1.lineWidth=1;
                ctx1.beginPath();
                ctx1.moveTo(0,x);
                ctx1.lineTo(200,x);
                //ctx1.stroke();
                ctx1.moveTo(x,0);
                ctx1.lineTo(x,200);
                //ctx1.stroke();
            }

            

            
        </script>
    </body>  
</html>  

<!--

+ Not able to get the image data


-->    